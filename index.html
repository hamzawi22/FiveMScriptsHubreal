<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FiveM Scripts Hub - Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap');
        
        :root {
            --primary: #9333ea;
            --secondary: #db2777;
            --dark-bg: #0f172a;
        }

        * {
            font-family: 'Cairo', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: radial-gradient(circle at top right, #1e1b4b, #0f172a, #020617);
            color: #f8fafc;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .gradient-text {
            background: linear-gradient(to right, #a855f7, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #4f46e5; border-radius: 10px; }
        
        .btn-discord {
            background-color: #5865F2;
            transition: all 0.3s ease;
        }
        .btn-discord:hover {
            background-color: #4752C4;
            transform: translateY(-2px);
        }

        .line-clamp-1 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
        }

        .line-clamp-2 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // ==========================================
        // 1. Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„ØªÙ‡ÙŠØ¦Ù€Ø©
        // ==========================================
        const ADMIN_EMAIL = 'obywawi@gmail.com';
        const DISCORD_CLIENT_ID = '1454211006866657384';
        const REDIRECT_URI = window.location.origin + window.location.pathname;

        const firebaseConfig = {
            apiKey: "AIzaSyDbW67rYjVnUdzoF9FvfLJypGi_MF9nQjg",
            authDomain: "login-system-124a6.firebaseapp.com",
            projectId: "login-system-124a6",
            storageBucket: "login-system-124a6.firebasestorage.app",
            messagingSenderId: "667998653226",
            appId: "1:667998653226:web:bc4a96a2dbbd22cf386c53",
            measurementId: "G-42NY348NXE"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // ==========================================
        // 2. Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        // ==========================================
        let currentUser = null;
        let scripts = [];
        let showAuth = false;
        let showUpload = false;
        let currentPage = 'home'; // home, settings, scriptDetails
        let currentScriptId = null;
        let activeCategory = 'all';
        let uploadForm = { title: '', description: '', category: 'jobs', mediaType: 'none', youtubeUrl: '' };
        let selectedFile = null;
        let selectedMedia = null;
        let downloadTimer = null;
        let downloadTimeLeft = 60;

        // ==========================================
        // 3. Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ®Ø²ÙŠÙ†
        // ==========================================
        const storage = {
            // Ø­ÙØ¸ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª Ù„Ù„Ø¬Ù…ÙŠØ¹ (Ù…Ø´ØªØ±ÙƒØ©)
            saveScripts: () => {
                localStorage.setItem('hub_scripts_global', JSON.stringify(scripts));
            },
            loadScripts: () => {
                // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©
                const data = localStorage.getItem('hub_scripts_global');
                if (data) {
                    scripts = JSON.parse(data);
                    
                    // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
                    const demoScripts = getDemoScripts();
                    const demoIds = demoScripts.map(s => s.id);
                    const existingIds = scripts.map(s => s.id);
                    
                    // Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ø³ÙƒØ±Ø¨ØªØ§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù…ÙÙ‚ÙˆØ¯Ø©
                    demoScripts.forEach(demo => {
                        if (!existingIds.includes(demo.id)) {
                            scripts.push(demo);
                        }
                    });
                    
                    storage.saveScripts();
                } else {
                    // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
                    scripts = getDemoScripts();
                    storage.saveScripts();
                }
            },
            saveUser: (user) => localStorage.setItem('hub_user', JSON.stringify(user)),
            getUser: () => JSON.parse(localStorage.getItem('hub_user')),
            clearUser: () => localStorage.removeItem('hub_user'),
            getUserData: (uid) => {
                const data = localStorage.getItem('hub_userdata_' + uid);
                return data ? JSON.parse(data) : null;
            },
            saveUserData: (uid, data) => localStorage.setItem('hub_userdata_' + uid, JSON.stringify(data))
        };

        // ==========================================
        // 4. Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        // ==========================================
        function getDemoScripts() {
            return [
                {
                    id: 'demo_1',
                    title: 'Police Job Script',
                    description: 'Ø³ÙƒØ±Ø¨Øª ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø´Ø±Ø·Ø© Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ØªØ¨ ÙˆØ§Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ù„Ø¨Ø§ØªØ±ÙˆÙ„. ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙˆØ§Ø¬Ù‡Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø­Ø¯ÙŠØ«Ø© ÙˆØ³Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù….',
                    category: 'jobs',
                    fileName: 'police_job.zip',
                    fileData: 'data:text/plain;base64,VGhpcyBpcyBhIGRlbW8gZmlsZQ==',
                    media: {
                        type: 'youtube',
                        url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ'
                    },
                    uploader: 'demo@fivem.com',
                    uploaderUid: 'demo_user_1',
                    uploaderName: 'FiveM Scripts',
                    date: new Date(Date.now() - 86400000 * 2).toISOString(),
                    stats: { views: 245, downloads: 89, uniqueDownloads: [] }
                },
                {
                    id: 'demo_2',
                    title: 'Luxury Car Pack',
                    description: 'Ù…Ø¬Ù…ÙˆØ¹Ø© Ø³ÙŠØ§Ø±Ø§Øª ÙØ®Ù…Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 15 Ø³ÙŠØ§Ø±Ø© Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© Ù…Ø¹ ØµÙˆØª Ø­Ù‚ÙŠÙ‚ÙŠ ÙˆØªÙØ§ØµÙŠÙ„ Ø¯Ù‚ÙŠÙ‚Ø©.',
                    category: 'cars',
                    fileName: 'luxury_cars.zip',
                    fileData: 'data:text/plain;base64,VGhpcyBpcyBhIGRlbW8gZmlsZQ==',
                    media: {
                        type: 'image',
                        data: 'https://images.unsplash.com/photo-1503376780353-7e6692767b70?w=800'
                    },
                    uploader: 'demo@fivem.com',
                    uploaderUid: 'demo_user_1',
                    uploaderName: 'FiveM Scripts',
                    date: new Date(Date.now() - 86400000 * 5).toISOString(),
                    stats: { views: 567, downloads: 234, uniqueDownloads: [] }
                },
                {
                    id: 'demo_3',
                    title: 'Downtown Map MLO',
                    description: 'Ø®Ø±ÙŠØ·Ø© ÙˆØ³Ø· Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø­ØµØ±ÙŠØ© Ù…Ø¹ Ù…Ø­Ù„Ø§Øª ØªØ¬Ø§Ø±ÙŠØ© ÙˆÙ…Ø·Ø§Ø¹Ù… ÙˆÙ…Ù‚Ø§Ù‡ÙŠ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø¨ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù‚Ø¹ÙŠØ©.',
                    category: 'maps',
                    fileName: 'downtown_mlo.zip',
                    fileData: 'data:text/plain;base64,VGhpcyBpcyBhIGRlbW8gZmlsZQ==',
                    media: {
                        type: 'image',
                        data: 'https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?w=800'
                    },
                    uploader: 'demo@fivem.com',
                    uploaderUid: 'demo_user_1',
                    uploaderName: 'FiveM Scripts',
                    date: new Date(Date.now() - 86400000 * 7).toISOString(),
                    stats: { views: 432, downloads: 156, uniqueDownloads: [] }
                },
                {
                    id: 'demo_4',
                    title: 'Advanced Banking System',
                    description: 'Ù†Ø¸Ø§Ù… Ø¨Ù†ÙƒÙŠ Ù…ØªÙ‚Ø¯Ù… ÙŠØ´Ù…Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§ØªØŒ Ø§Ù„Ù‚Ø±ÙˆØ¶ØŒ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§ØªØŒ ÙˆØ¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø¦ØªÙ…Ø§Ù† Ù…Ø¹ ÙˆØ§Ø¬Ù‡Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ©.',
                    category: 'scripts',
                    fileName: 'banking_system.zip',
                    fileData: 'data:text/plain;base64,VGhpcyBpcyBhIGRlbW8gZmlsZQ==',
                    media: null,
                    uploader: 'demo@fivem.com',
                    uploaderUid: 'demo_user_1',
                    uploaderName: 'FiveM Scripts',
                    date: new Date(Date.now() - 86400000 * 10).toISOString(),
                    stats: { views: 678, downloads: 298, uniqueDownloads: [] }
                },
                {
                    id: 'demo_5',
                    title: 'Medic Job Complete',
                    description: 'Ø³ÙƒØ±Ø¨Øª ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¥Ø³Ø¹Ø§Ù Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ù„Ø§Ø¬ ÙˆØ§Ù„Ø¥Ù†Ù‚Ø§Ø° ÙˆØ§Ù„Ù…Ø³ØªØ´ÙÙ‰. ÙŠØªØ¶Ù…Ù† Ø³ÙŠØ§Ø±Ø§Øª Ø¥Ø³Ø¹Ø§Ù ÙˆÙ…Ù„Ø§Ø¨Ø³ Ø®Ø§ØµØ©.',
                    category: 'jobs',
                    fileName: 'medic_job.zip',
                    fileData: 'data:text/plain;base64,VGhpcyBpcyBhIGRlbW8gZmlsZQ==',
                    media: {
                        type: 'youtube',
                        url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ'
                    },
                    uploader: 'demo@fivem.com',
                    uploaderUid: 'demo_user_1',
                    uploaderName: 'FiveM Scripts',
                    date: new Date(Date.now() - 86400000 * 1).toISOString(),
                    stats: { views: 123, downloads: 45, uniqueDownloads: [] }
                }
            ];
        }

        // ==========================================
        // 5. Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡ÙˆÙŠØ©
        // ==========================================
        
        async function signInWithGoogle() {
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                await auth.signInWithPopup(provider);
                showAuth = false;
            } catch (error) {
                alert("Ø®Ø·Ø£ Ø¬ÙˆØ¬Ù„: " + error.message);
            }
        }

        function signInWithDiscord() {
            const url = `https://discord.com/api/oauth2/authorize?client_id=${DISCORD_CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=token&scope=identify%20email`;
            window.location.href = url;
        }

        async function handleDiscordCallback() {
            const fragment = new URLSearchParams(window.location.hash.slice(1));
            const token = fragment.get('access_token');
            if (token) {
                try {
                    const res = await fetch('https://discord.com/api/users/@me', {
                        headers: { Authorization: `Bearer ${token}` }
                    });
                    const data = await res.json();
                    currentUser = {
                        uid: 'ds_' + data.id,
                        username: data.global_name || data.username,
                        email: data.email || `${data.username}@discord.link`,
                        picture: data.avatar ? `https://cdn.discordapp.com/avatars/${data.id}/${data.avatar}.png` : 'https://cdn.discordapp.com/embed/avatars/0.png',
                        provider: 'discord'
                    };
                    let userData = storage.getUserData(currentUser.uid);
                    if (!userData) {
                        userData = { nameChanged: false, customName: null };
                        storage.saveUserData(currentUser.uid, userData);
                    }
                    currentUser.userData = userData;
                    storage.saveUser(currentUser);
                    window.location.hash = '';
                    render();
                } catch (e) { console.error("Discord Error", e); }
            }
        }

        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = {
                    uid: user.uid,
                    username: user.displayName,
                    email: user.email,
                    picture: user.photoURL,
                    provider: 'google'
                };
                let userData = storage.getUserData(user.uid);
                if (!userData) {
                    userData = { nameChanged: false, customName: null };
                    storage.saveUserData(user.uid, userData);
                }
                currentUser.userData = userData;
                storage.saveUser(currentUser);
            } else {
                const localUser = storage.getUser();
                if (localUser && localUser.provider === 'discord') {
                    currentUser = localUser;
                    let userData = storage.getUserData(localUser.uid);
                    if (!userData) {
                        userData = { nameChanged: false, customName: null };
                        storage.saveUserData(localUser.uid, userData);
                    }
                    currentUser.userData = userData;
                } else {
                    currentUser = null;
                }
            }
            render();
        });

        function logout() {
            auth.signOut();
            storage.clearUser();
            currentUser = null;
            location.reload();
        }

        // ==========================================
        // 6. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰
        // ==========================================
        
        function handleFile(e) {
            selectedFile = e.target.files[0];
            render();
        }

        function handleMedia(e) {
            selectedMedia = e.target.files[0];
            render();
        }

        function submitScript() {
            if (!selectedFile) return alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ø§Ù„Ø³ÙƒØ±Ø¨Øª");
            if (!uploadForm.title || !uploadForm.description) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

            const reader = new FileReader();
            reader.onload = (event) => {
                let mediaData = null;
                if (uploadForm.mediaType === 'image' && selectedMedia) {
                    const mediaReader = new FileReader();
                    mediaReader.onload = (e) => {
                        mediaData = {
                            type: 'image',
                            data: e.target.result
                        };
                        saveScriptData(event.target.result, mediaData);
                    };
                    mediaReader.readAsDataURL(selectedMedia);
                } else if (uploadForm.mediaType === 'youtube' && uploadForm.youtubeUrl) {
                    mediaData = {
                        type: 'youtube',
                        url: uploadForm.youtubeUrl
                    };
                    saveScriptData(event.target.result, mediaData);
                } else {
                    saveScriptData(event.target.result, null);
                }
            };
            reader.readAsDataURL(selectedFile);
        }

        function saveScriptData(fileData, mediaData) {
            const scriptData = {
                id: 'sc_' + Date.now(),
                title: uploadForm.title,
                description: uploadForm.description,
                category: uploadForm.category,
                fileName: selectedFile.name,
                fileData: fileData,
                media: mediaData,
                uploader: currentUser.email,
                uploaderUid: currentUser.uid,
                uploaderName: currentUser.userData?.customName || currentUser.username,
                date: new Date().toISOString(),
                stats: { views: 0, downloads: 0, uniqueDownloads: [] }
            };

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙƒØ±Ø¨Øª ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
            scripts.unshift(scriptData);
            
            // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø´ØªØ±Ùƒ (ÙŠØ¸Ù‡Ø± Ù„Ù„Ø¬Ù…ÙŠØ¹)
            storage.saveScripts();
            
            showUpload = false;
            resetUpload();
            
            alert("âœ… ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¢Ù† Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†");
            render();
        }

        function viewDetails(scriptId) {
            currentScriptId = scriptId;
            const script = scripts.find(s => s.id === scriptId);
            if (script) {
                script.stats.views++;
                storage.saveScripts();
                currentPage = 'scriptDetails';
                downloadTimer = null;
                downloadTimeLeft = 60;
                window.scrollTo(0, 0);
                render();
            }
        }

        function startDownloadTimer() {
            downloadTimeLeft = 60;
            render(); // Ø±Ø³Ù… Ø§Ù„ØµÙØ­Ø© Ø£ÙˆÙ„Ø§Ù‹
            
            downloadTimer = setInterval(() => {
                downloadTimeLeft--;
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
                const timerEl = document.querySelector('.timer-number');
                const circleEl = document.querySelector('.timer-circle');
                
                if (timerEl) {
                    timerEl.textContent = downloadTimeLeft;
                }
                
                if (circleEl) {
                    const offset = 2 * Math.PI * 70 * (1 - downloadTimeLeft / 60);
                    circleEl.style.strokeDashoffset = offset;
                }
                
                if (downloadTimeLeft <= 0) {
                    clearInterval(downloadTimer);
                    downloadTimer = null;
                    render(); // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… ÙƒØ§Ù…Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
                }
            }, 1000);
        }

        function actionDownload(id) {
            const s = scripts.find(x => x.id === id);
            if (!s || !currentUser) return;

            if (s.stats.uniqueDownloads.includes(currentUser.uid)) {
                return alert("âš ï¸ Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨ØªØ­Ù…ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ù…Ø³Ø¨Ù‚Ø§Ù‹");
            }

            s.stats.uniqueDownloads.push(currentUser.uid);
            s.stats.downloads++;
            storage.saveScripts();

            const link = document.createElement('a');
            link.href = s.fileData;
            link.download = s.fileName;
            link.click();

            alert(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„: ${s.title}`);
            render();
        }

        function updateUserName(newName) {
            if (!currentUser || !newName) return;
            
            const userData = storage.getUserData(currentUser.uid);
            if (userData.nameChanged) {
                return alert("âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù… Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");
            }

            userData.customName = newName;
            userData.nameChanged = true;
            storage.saveUserData(currentUser.uid, userData);
            currentUser.userData = userData;
            storage.saveUser(currentUser);
            
            alert("âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø³Ù… Ø¨Ù†Ø¬Ø§Ø­!");
            render();
        }

        function resetUpload() {
            uploadForm = { title: '', description: '', category: 'jobs', mediaType: 'none', youtubeUrl: '' };
            selectedFile = null;
            selectedMedia = null;
        }

        function goHome() {
            currentPage = 'home';
            currentScriptId = null;
            if (downloadTimer) {
                clearInterval(downloadTimer);
                downloadTimer = null;
            }
            render();
        }

        // ==========================================
        // 7. ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        // ==========================================
        
        function render() {
            const app = document.getElementById('app');
            const isAdmin = currentUser?.email === ADMIN_EMAIL;
            const filtered = activeCategory === 'all' ? scripts : scripts.filter(s => s.category === activeCategory);
            const displayName = currentUser?.userData?.customName || currentUser?.username;
            const currentScript = currentScriptId ? scripts.find(s => s.id === currentScriptId) : null;

            app.innerHTML = `
                <nav class="glass-card sticky top-0 z-[100] px-6 py-4 border-b border-white/5">
                    <div class="container mx-auto flex justify-between items-center">
                        <div class="flex items-center gap-4 cursor-pointer" onclick="goHome()">
                            <div class="bg-gradient-to-br from-purple-600 to-pink-600 p-2 rounded-xl shadow-lg">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                            </div>
                            <span class="text-2xl font-black gradient-text tracking-tighter">FIVEM HUB</span>
                        </div>

                        <div class="flex items-center gap-6">
                            ${currentUser ? `
                                <button onclick="goHome()" class="hidden md:block px-4 py-2 rounded-xl ${currentPage === 'home' ? 'bg-purple-600 font-bold' : 'text-gray-400 hover:text-white'} transition-all">
                                    Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                                </button>
                                <button onclick="currentPage='settings';currentScriptId=null;render()" class="hidden md:block px-4 py-2 rounded-xl ${currentPage === 'settings' ? 'bg-purple-600 font-bold' : 'text-gray-400 hover:text-white'} transition-all">
                                    Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                                </button>
                                <div class="flex items-center gap-3">
                                    <img src="${currentUser.picture}" class="w-10 h-10 rounded-full border-2 border-purple-500/50 p-0.5">
                                    ${isAdmin ? `<button onclick="showUpload=true;render()" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm font-bold transition-all shadow-lg">â• Ø±ÙØ¹</button>` : ''}
                                </div>
                            ` : `
                                <button onclick="showAuth=true;render()" class="bg-white text-slate-900 px-6 py-2 rounded-xl font-black hover:bg-purple-50 transition-all">Ø¯Ø®ÙˆÙ„</button>
                            `}
                        </div>
                    </div>
                </nav>

                ${!currentUser ? `
                    <section class="container mx-auto px-6 py-24 text-center">
                        <h1 class="text-5xl md:text-8xl font-black mb-8 leading-tight tracking-tight">Ø³ÙŠØ±ÙØ±Ùƒ ÙŠØ³ØªØ­Ù‚ <br><span class="gradient-text italic">Ø§Ù„Ø£ÙØ¶Ù„ Ø¯Ø§Ø¦Ù…Ø§Ù‹</span></h1>
                        <p class="text-gray-400 text-xl max-w-2xl mx-auto mb-12">ØªØ­Ù…ÙŠÙ„ Ø³ÙƒØ±Ø¨ØªØ§Øª FiveM Ø§Ù„Ø­ØµØ±ÙŠØ© Ù…Ø¬Ø§Ù†Ø§Ù‹. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙŠØªÙ… ÙØ­ØµÙ‡Ø§ ÙˆØªØ¯Ù‚ÙŠÙ‚Ù‡Ø§ Ù„Ø¶Ù…Ø§Ù† Ø£Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø£Ù…Ø§Ù†.</p>
                        <button onclick="showAuth=true;render()" class="bg-purple-600 px-12 py-5 rounded-2xl font-black text-2xl hover:scale-105 transition-all shadow-2xl shadow-purple-500/40">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† - Ù…Ø¬Ø§Ù†Ø§Ù‹</button>
                        
                        <div class="mt-20 grid grid-cols-1 md:grid-cols-3 gap-8 text-center max-w-4xl mx-auto">
                            <div class="glass-card rounded-3xl p-8">
                                <div class="text-5xl mb-4">ğŸ®</div>
                                <h3 class="text-xl font-bold mb-2">Ø³ÙƒØ±Ø¨ØªØ§Øª Ø­ØµØ±ÙŠØ©</h3>
                                <p class="text-gray-400 text-sm">Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¶Ø®Ù…Ø© Ù…Ù† Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©</p>
                            </div>
                            <div class="glass-card rounded-3xl p-8">
                                <div class="text-5xl mb-4">ğŸ›¡ï¸</div>
                                <h3 class="text-xl font-bold mb-2">Ø¢Ù…Ù† 100%</h3>
                                <p class="text-gray-400 text-sm">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ù…ÙØ­ÙˆØµØ© ÙˆÙ…Ø¯Ù‚Ù‚Ø©</p>
                            </div>
                            <div class="glass-card rounded-3xl p-8">
                                <div class="text-5xl mb-4">âš¡</div>
                                <h3 class="text-xl font-bold mb-2">ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¯ÙˆØ±ÙŠØ©</h3>
                                <p class="text-gray-400 text-sm">Ù…Ø­ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯ ÙŠØ¶Ø§Ù Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±</p>
                            </div>
                        </div>
                    </section>
                ` : currentPage === 'home' ? `
                    <div class="container mx-auto px-6 mt-10">
                        <div class="flex gap-4 overflow-x-auto pb-4 no-scrollbar">
                            ${['all', 'jobs', 'cars', 'maps', 'scripts', 'other'].map(cat => `
                                <button onclick="activeCategory='${cat}';render()" class="px-8 py-3 rounded-2xl border transition-all ${activeCategory === cat ? 'bg-purple-600 border-purple-400 font-bold shadow-lg' : 'border-white/10 glass-card text-gray-400 hover:text-white hover:bg-white/5'}">
                                    ${cat === 'all' ? 'Ø§Ù„ÙƒÙ„' : cat.charAt(0).toUpperCase() + cat.slice(1)}
                                </button>
                            `).join('')}
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-12 mb-20">
                            ${filtered.map(s => {
                                let mediaHtml = '';
                                if (s.media) {
                                    if (s.media.type === 'image') {
                                        mediaHtml = `<img src="${s.media.data}" class="w-full h-36 object-cover rounded-t-[24px]">`;
                                    } else if (s.media.type === 'youtube') {
                                        const videoId = s.media.url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/)?.[1];
                                        if (videoId) {
                                            mediaHtml = `<img src="https://img.youtube.com/vi/${videoId}/maxresdefault.jpg" class="w-full h-36 object-cover rounded-t-[24px]">`;
                                        }
                                    }
                                }
                                
                                return `
                                <div class="glass-card rounded-[24px] overflow-hidden border border-white/5 hover:border-purple-500/40 transition-all duration-500 relative group cursor-pointer" onclick="viewDetails('${s.id}')">
                                    ${mediaHtml}
                                    <div class="p-5">
                                        <div class="flex justify-between items-center mb-3">
                                            <span class="bg-purple-600/20 text-purple-400 text-[9px] font-black px-2 py-1 rounded-full uppercase tracking-tighter border border-purple-500/20">${s.category}</span>
                                            <span class="text-[9px] text-gray-500">${new Date(s.date).toLocaleDateString('ar-EG')}</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 line-clamp-1">${s.title}</h3>
                                        <p class="text-gray-400 text-xs mb-4 leading-relaxed h-8 overflow-hidden line-clamp-2">${s.description}</p>
                                        
                                        <div class="flex items-center gap-4 mb-4 text-[10px] text-gray-500 border-y border-white/5
